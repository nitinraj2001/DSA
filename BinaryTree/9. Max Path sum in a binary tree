class Solution {
    public int maxPathSum(TreeNode root) {
        int max[] = new int[1];
        max[0] = Integer.MIN_VALUE;
        maximumPathSum(root,max);
        return max[0];
    }

    public int maximumPathSum(TreeNode root, int[] max){
        if(root == null) return 0;
        int lps = Math.max(0,maximumPathSum(root.left,max));
        int rps = Math.max(0,maximumPathSum(root.right,max));
        max[0] = Math.max(max[0], lps+rps+root.val);
        return root.val + Math.max(lps ,rps);
    }
}
